<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºŒé€²ä½æ‹¼å­—ç‹ - 50é—œæŒ‘æˆ°ç‰ˆ</title>
    <style>
        :root {
            --primary: #3498db;
            --success: #27ae60;
            --dark: #2c3e50;
            --accent: #f39c12;
            --score-bg: #e3f2fd;
        }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background-color: #f8f9fa; display: flex; flex-direction: column; align-items: center; padding: 10px; margin: 0; }
        
        .score-board {
            background: var(--score-bg);
            padding: 10px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            margin: 15px 0;
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--primary);
            border: 2px solid #bbdefb;
        }

        .container { background: white; padding: 1.5rem; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); max-width: 95%; width: 850px; }
        
        h1 { color: var(--dark); margin: 0; font-size: 1.6rem; text-align: center; }
        .instruction { color: #666; text-align: center; margin-bottom: 15px; font-size: 0.9rem; }

        .game-area { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin: 20px 0; }
        .char-card { display: flex; flex-direction: column; align-items: center; background: #fff; border: 2px solid #eee; padding: 12px; border-radius: 12px; }
        
        .bit-row { display: flex; flex-direction: column; gap: 5px; }
        .bit-container { display: flex; flex-direction: column; align-items: center; }
        
        .bit-btn {
            width: 42px; height: 42px; border: none; border-radius: 8px;
            font-size: 1.2rem; font-weight: bold; cursor: pointer;
            transition: all 0.1s; background: #e9ecef; color: #adb5bd;
        }
        .bit-btn.active { background: var(--dark); color: white; transform: translateY(-2px); box-shadow: 0 4px 0 #1a252f; }
        
        .bit-weight { font-size: 0.7rem; color: #6c757d; margin-bottom: 2px; font-weight: bold; }

        .letter-display {
            margin-top: 12px; font-size: 2rem; font-weight: 800;
            width: 50px; height: 50px; display: flex; align-items: center;
            justify-content: center; border-bottom: 5px solid #dee2e6;
        }
        .letter-display.correct { color: var(--success); border-bottom-color: var(--success); animation: pop 0.3s ease; }
        @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        .controls { text-align: center; margin-top: 20px; display: flex; flex-direction: column; gap: 10px; align-items: center; }
        .btn-next { padding: 12px 40px; font-size: 1.1rem; background: var(--accent); color: white; border: none; border-radius: 30px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-next:disabled { background: #ccc; cursor: not-allowed; }

        .game-status { color: #666; font-size: 0.8rem; margin-top: 10px; }
    </style>
</head>
<body>

    <h1>ğŸš€ äºŒé€²ä½æ‹¼å­—ç‹ 50 é—œ</h1>
    <p class="instruction">é»æ“Šä½å…ƒé–‹é—œæ‹¼å‡ºå–®å­—ï¼Œç­”å°å­—æ¯å°±åŠ åˆ†ï¼</p>

    <div class="score-board">å¾—åˆ†: <span id="score">0</span></div>

    <div class="container">
        <h2 style="text-align: center; margin: 0;">ç›®æ¨™ï¼š<span id="target-word" style="color: var(--primary); letter-spacing: 5px;">---</span></h2>
        <div id="game-board" class="game-area"></div>
        <div class="controls">
            <div id="message" style="color: var(--success); font-weight: bold; height: 24px;"></div>
            <button id="next-btn" class="btn-next" onclick="loadNewWord()">ä¸‹ä¸€é—œ</button>
            <div class="game-status" id="progress">é€²åº¦ï¼š0 / 50</div>
        </div>
    </div>

    <script>
        // 50 å€‹å–®å­—åº«
        const fullWordBank = [
            "SITCON", "HOC", "CODE", "PYTHON", "LINUX", "JAVA", "HTML", "CSS", "WEB", "DATA",
            "LOGIC", "HEART", "TECH", "KING", "APPLE", "BIRD", "CAT", "DOG", "FISH", "GAME",
            "HOME", "ICON", "JAZZ", "KITE", "LAMP", "MOON", "NODE", "OPEN", "PIANO", "QUIZ",
            "RAIN", "STAR", "TREE", "UNIT", "VIEW", "WIND", "XRAY", "YOGA", "ZOO", "FAST",
            "SLOW", "COOL", "FIRE", "BLUE", "RED", "GOLD", "JUMP", "SING", "TALK", "LOVE"
        ];
        
        let unusedWords = [...fullWordBank];
        let currentWord = "";
        let score = 0;
        let solvedLetters = new Set();
        const weights = [16, 8, 4, 2, 1];

        function loadNewWord() {
            if (unusedWords.length === 0) {
                alert("å¤ªæ£’äº†ï¼ä½ å·²ç¶“å®Œæˆæ‰€æœ‰ 50 å€‹å–®å­—ï¼å³å°‡é‡ç½®é¡Œåº«ã€‚");
                unusedWords = [...fullWordBank];
                score = 0; // é‡ç½®åˆ†æ•¸ï¼ˆå¯ä¾éœ€æ±‚æ±ºå®šæ˜¯å¦é‡ç½®ï¼‰
            }

            const randomIndex = Math.floor(Math.random() * unusedWords.length);
            currentWord = unusedWords.splice(randomIndex, 1)[0];
            
            solvedLetters.clear();
            document.getElementById('target-word').innerText = currentWord;
            document.getElementById('message').innerText = "";
            document.getElementById('next-btn').disabled = true;
            document.getElementById('progress').innerText = `é€²åº¦ï¼š${fullWordBank.length - unusedWords.length} / ${fullWordBank.length}`;
            renderBoard();
        }

        function renderBoard() {
            const board = document.getElementById('game-board');
            board.innerHTML = '';

            currentWord.split('').forEach((char, charIdx) => {
                const targetVal = char.charCodeAt(0) - 64;
                const card = document.createElement('div');
                card.className = 'char-card';

                const bitRow = document.createElement('div');
                bitRow.className = 'bit-row';

                for (let i = 0; i < 5; i++) {
                    const weightWrapper = document.createElement('div');
                    weightWrapper.className = 'bit-container';
                    const weightHint = document.createElement('div');
                    weightHint.className = 'bit-weight';
                    weightHint.innerText = weights[i];

                    const btn = document.createElement('button');
                    btn.className = 'bit-btn';
                    btn.innerText = '0';
                    btn.dataset.weight = weights[i];
                    btn.onclick = function() {
                        this.innerText = this.innerText === '0' ? '1' : '0';
                        this.classList.toggle('active');
                        calculateChar(card, targetVal, charIdx);
                    };

                    weightWrapper.appendChild(weightHint);
                    weightWrapper.appendChild(btn);
                    bitRow.appendChild(weightWrapper);
                }

                const display = document.createElement('div');
                display.className = 'letter-display';
                display.innerText = '?';

                card.appendChild(bitRow);
                card.appendChild(display);
                board.appendChild(card);
            });
        }

        function calculateChar(card, targetVal, charIdx) {
            const btns = card.querySelectorAll('.bit-btn');
            const display = card.querySelector('.letter-display');
            let sum = 0;

            btns.forEach(btn => {
                if (btn.classList.contains('active')) {
                    sum += parseInt(btn.dataset.weight);
                }
            });

            if (sum === 0) {
                display.innerText = '?';
                display.className = 'letter-display';
            } else if (sum > 26) {
                display.innerText = 'âš ï¸';
                display.className = 'letter-display'; // è¶…éä¸æ‰£åˆ†ï¼Œåƒ…æç¤º
            } else {
                const char = String.fromCharCode(64 + sum);
                display.innerText = char;
                
                if (sum === targetVal) {
                    if (!solvedLetters.has(charIdx)) {
                        display.className = 'letter-display correct';
                        solvedLetters.add(charIdx);
                        score += 10;
                        document.getElementById('score').innerText = score;
                        checkWin();
                    }
                } else {
                    display.className = 'letter-display';
                    if (solvedLetters.has(charIdx)) {
                        solvedLetters.delete(charIdx);
                    }
                }
            }
        }

        function checkWin() {
            if (solvedLetters.size === currentWord.length) {
                const bonus = currentWord.length * 5;
                score += bonus;
                document.getElementById('score').innerText = score;
                document.getElementById('message').innerText = `å®Œç¾æ‹¼å‡º ${currentWord}ï¼çå‹µ +${bonus}`;
                document.getElementById('next-btn').disabled = false;
            }
        }

        loadNewWord();
    </script>
</body>
</html>
